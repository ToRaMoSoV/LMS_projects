# ZXC25D Raycasting Engine

Универсальный движок для создания 2.5D игр в стиле классических шутеров (Wolfenstein 3D, Doom) с полноценным редактором карт.

## Структура проекта

```
zxc25d/
├── assets/              # Ресурсы игры
│   ├── maps/           # Файлы карт (.map)
│   └── textures/       # Текстуры для стен и объектов
├── core/               # Ядро движка
│   ├── camera.py       # Система камеры и управления
│   ├── map.py          # Загрузка/сохранение карт
│   ├── math2d.py       # Математические функции 2D
│   ├── raycaster.py    # Raycasting алгоритм
│   ├── ray.py          # Луч для raycasting
│   ├── tile.py         # Типы тайлов и их свойства
│   └── world.py        # Игровой мир и логика
├── editor/             # Редактор карт
│   ├── map_grid.py     # Виджет сетки для редактирования
│   ├── palette.py      # Палитра объектов и тайлов
│   ├── cell_panel.py   # Панель редактирования ячеек
│   ├── entity_panel.py # Панель работы с сущностями
│   └── inspector/      # Инспектор свойств объектов
└── runtime/            # Игровой рантайм
    └── runtime.py      # Запуск игрового процесса
```

## Быстрый старт

### Установка зависимостей
```bash
pip install arcade PyQt6
```

### Запуск редактора карт
Редактор позволяет создавать и редактировать карты для игры:
```bash
python -m zxc25d.editor.editor
```

### Запуск игры
Для запуска игры с существующей картой:
```bash
python game.py
```
или
```bash
python -m zxc25d.runtime.runtime путь/к/карте.map
```

### Тестирование
```bash
python test.py
```

## Редактор карт

### Основные возможности:
- **Визуальное редактирование** - интуитивный интерфейс с сеткой
- **Палитра объектов** - выбор различных типов стен и сущностей
- **Инспектор свойств** - настройка параметров выбранных объектов
- **Сохранение/загрузка** - работа с форматом .map файлов
- **Предпросмотр** - быстрый запуск созданной карты

### Элементы управления:
- **ЛКМ** - разместить объект
- **ПКМ** - удалить объект или открыть контекстное меню
- **Перетаскивание** - массовое размещение объектов
- **Горячие клавиши** - быстрый доступ к инструментам

## Игровой движок

### Особенности рендеринга:
- **Raycasting 2.5D** - псевдотрехмерный рендеринг
- **Разная высота стен** - поддержка вертикальных вариаций
- **Освещение** - различные уровни яркости в зависимости от стороны стены
- **Оптимизация** - эффективный алгоритм трассировки лучей

### Управление в игре:
- **W/S** - движение вперед/назад
- **A/D** - стрейф влево/вправо
- **←/→** - вращение камеры
- **ESC** - выход из игры

## Создание карт

### Формат карт:
Карты сохраняются в текстовых файлах с расширением `.map`, где:
- Разные символы представляют различные типы стен
- Специальные символы обозначают сущности (игрок, противники, предметы)
- Пустые пространства - проходимые области

### Пример простой карты:
```
20 15
####################
#..................#
#..##########......#
#..#........#......#
#..#........#......#
#..##########......#
#..................#
####################
```

## Разработка собственных игр

### 1. Создание контента:
- Используйте редактор для создания уровней
- Добавьте текстуры в папку `assets/textures/`
- Настройте типы тайлов в `core/tile.py`

### 2. Настройка игровой логики:
- Модифицируйте `core/world.py` для добавления сущностей
- Реализуйте механики в соответствующих модулях
- Настройте параметры камеры и управления

### 3. Расширение функциональности:
- Добавление новых типов стен и текстур
- Реализация системы оружия и стрельбы
- Создание ИИ для противников
- Добавление звуковых эффектов и музыки

## Архитектура

### Основные компоненты:
1. **Raycaster** - отвечает за трассировку лучей и рендеринг
2. **Camera** - управление положением и направлением взгляда
3. **World** - содержит состояние игрового мира и логику
4. **Map** - загружает и хранит данные уровня
5. **Editor** - инструмент для создания и редактирования карт

### Принципы работы:
- Разделение логики и рендеринга
- Модульность компонентов
- Простота расширения функциональности
- Совместимость с классическими форматами карт

## Возможные улучшения

### Графика:
- [ ] Поддержка текстурных стен
- [ ] Спрайты для объектов и врагов
- [ ] Эффекты частиц (дым, огонь, кровь)
- [ ] Динамическое освещение
- [ ] Параллакс для текстур пола/потолка

### Геймплей:
- [ ] Различные типы оружия
- [ ] Система здоровья и брони
- [ ] Инвентарь и предметы
- [ ] Диалоги и квесты
- [ ] Мультиплеер

### Редактор:
- [ ] Поддержка слоев
- [ ] Скриптование событий
- [ ] Встроенный отладчик
- [ ] Плагины для расширения функционала
